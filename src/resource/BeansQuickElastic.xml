<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
    http://www.springframework.org/schema/beans/spring-beans-3.0.xsd">

<bean id="main_config" 
	class="com.edifixio.amine.configFactory.DeclaredJsonObjectConfigFactory">
	<constructor-arg name="classToFactory">
		<value type="java.lang.Class">com.edifixio.amine.config.SimpleRootConfig</value>
	</constructor-arg>
	
	<constructor-arg name="childFactories">
		<map>
			<entry key="_host" value-ref="JECFS_host"/>
		  	<entry key="_facets" value-ref="JECFS_facets"/>
		</map>
	</constructor-arg>
</bean>
<!-- ************* construction of facet array factory ************************************* -->

<bean id="JECFS_facets" class="com.edifixio.amine.configFactory.JsonElementConfigFactoryState">
	<constructor-arg name="jecf" ref="JACF_facets"/>
	<constructor-arg name="isRequired" value="false"/>
</bean>


<bean id="JACF_facets" class="com.edifixio.amine.configFactory.JsonArrayConfigFactory">
	<constructor-arg name="classToFactory">
		<value type="java.lang.Class">com.edifixio.amine.config.SimpleJsonArrayConfig</value>
	</constructor-arg>
	<constructor-arg name="jsonPrimitiveConfigFactoryChild" ref="JPCF_facet">
	
	</constructor-arg>
</bean>
<bean id="JPCF_facet" 
			class="com.edifixio.amine.configFactory.JsonPrimitiveConfigFactory">
	<constructor-arg name="jsonPrimitiveTypeConfig" ref="JPTC_simple_str"/>
</bean>

<!-- ************************** construction of state of factory to inject in object factory
**************************************************************************************** -->
<bean id="JECFS_host" class="com.edifixio.amine.configFactory.JsonElementConfigFactoryState">
	<constructor-arg name="jecf" ref="JPCF_host"/>
</bean>

<!-- ****** create simple JSON who handling only string configuration ******************** -->
<bean id="JPCF_host" 
			class="com.edifixio.amine.configFactory.JsonPrimitiveConfigFactory">
	<constructor-arg name="jsonPrimitiveTypeConfig" ref="JPTC_simple_str"/>
</bean>

<bean id="JPTC_simple_str" class="com.edifixio.amine.config.JsonPrimitiveTypeConfig" >
	<property name="stringConfig">
		<value type="java.lang.Class">com.edifixio.amine.config.JsonStringConfig</value>
	</property>
</bean>


</beans>